"use strict";function threeBanner(t,e){!t||!t instanceof jQuery?console.error("3d轮播容器必须为一个jq对象"):(this.container=t,this.options=$.extend({moveTime:300,viewItems:3,moveContainer:".banners",moveItem:".b-crops-item",midClass:"active",isClick:!0,autoFill:!1,positions:[{left:"12%",scale3d:"scale3d(0.7, 0.7, 1)",zIndex:2},{left:"50%",scale3d:"scale3d(1, 1, 1)",zIndex:5},{left:"70%",scale3d:"scale3d(0.7, 0.7, 1)",zIndex:2}],positionTwo:[{left:"50%",scale3d:"scale3d(1, 1, 1)",zIndex:5},{left:"55.5%",scale3d:"scale3d(1.2, 0.9, 1)",zIndex:2}]},e),this.init())}threeBanner.prototype.init=function(){this.initEl();var t=this,e=this.container,n=this.options;n.autoFill&&!n.controller&&t.fill(),t.items=e.find(n.moveItem),2==t.items.length&&(n.positions=n.positionTwo,t.iCenter=0);for(var i="transform "+t.options.moveTime/1e3+"s linear",o=0;o<t.items.length;o++)t.aSort[o]=t.items.eq(o).css("transition",i).attr("index",o);t.change().bindEvents()},threeBanner.prototype.initEl=function(){var t=this.container,e=this.options,n=this;return n.changeDom=t.find(e.moveContainer),n.aSort=[],n.animateEnd=!0,n.timer=null,n.iCenter=e.viewItems%2,e.controller&&(n.controller="string"==typeof e.controller?t.find(e.controller):e.controller,n.tabs=n.controller.find("li"),e.selClass=e.selClass||"active"),this},threeBanner.prototype.fill=function(){var t=this,e=this.container,n=this.options,i=e.find(n.moveItem),o=i.length,r=n.viewItems;if(o<r)for(var s=o;o<r;)for(var a=0;a<s;a++)o++,t.changeDom.append(i.eq(a).clone())},threeBanner.prototype.change=function(){for(var t=this,e=this.options,n=e.positions,i=0;i<t.aSort.length;i++){var o=i==t.iCenter,r=this.aSort[i].removeClass(e.midClass).attr("is_Mid",o),s=n[i];i<e.viewItems?(r.css({display:"block","z-index":s.zIndex,transform:s.scale3d+" translateX(-50%)"}),function(i,o){i.animate({left:n[o].left},e.moveTime,function(){t.animateEnd=1,"true"==i.attr("is_Mid")&&i.addClass(e.midClass)})}(r,i)):r.css({display:"none",left:"50%","z-index":2,transform:"scale3d(0,0,0,)  translateX(-50%)"})}if(t.controller){var a=t.aSort[t.iCenter].attr("index"),l=e.selClass;t.tabs.removeClass(l).eq(a).addClass(l)}return this},threeBanner.prototype.doPrev=function(){this.aSort.unshift(this.aSort.pop()),this.change()},threeBanner.prototype.doNext=function(){this.aSort.push(this.aSort.shift()),this.change()},threeBanner.prototype.correct=function(t,e){var n=this;if(e>t){for(i=0;i<e-t;i++)n.aSort.push(n.aSort.shift());n.change()}if(e<t){for(var i=0;i<t-e;i++)n.aSort.unshift(n.aSort.pop());n.change()}},threeBanner.prototype.bindEvents=function(){var t=this,e=t.container,n=t.options,i=t.options.selClass;return n.prevBtn&&e.find(n.prevBtn).on("click",function(){t.doPrev()}),n.nextBtn&&e.find(n.nextBtn).on("click",function(){t.doNext()}),n.isClick&&e.on("click",n.moveItem,function(){var e=$(this);if("true"!==e.attr("is_Mid")){var n=e.attr("index"),o=t.controller.find("."+i).index();t.correct(o,n)}}),t.controller&&t.controller.on("click","li",function(){var e=$(this);if(!e.hasClass(i)){var n=e.index(),o=t.controller.find("."+i).index();t.correct(o,n)}}),this};