
<!-- saved from url=(0028)http://dsj.858.im/trace.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>农业服务大数据</title>
    
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            margin: 0;
            overflow: auto;
            background-color: #000;
        }
        div,img{
            position: absolute;
            display: block;
        }
        dfn{
            display: inline-block;
            font-size: 12px;
            color:#80aec6;
            width:40px;
            font-style: normal;
            text-align: right;
        }
        .text-color{
            background: linear-gradient(to bottom, #0884d9, #0acfe8);
            -webkit-background-clip: text;
            font-size: 18px;
            font-weight: 600;
            text-align: right;
            width: 78px;
            height:24px;
            color: transparent;
        }
        .list-table {
            position: relative;
            display: inline-block;
            width: 30%;
            height: 30px;
            overflow: hidden;
            text-align: center;
            font-size: 14px;
            line-height: 35px;
        }
        .row1{
            position: relative;
            background-color: #0b1838;
            border-radius: 10px;
        }
        .row0{
            position: relative;
        }
        ul,li{
            list-style: none;
        }
        li{
            list-style: none;
            margin-left: -20px;
        }
        .saomiao-list{
            position: relative;
            font-size: 14px;
            line-height: 20px;
            margin-bottom:10px;
        }
        .flow-list{
            position: relative;
            color:rgb(16,108,178);
            font-size: 12px;
            margin-top:2px;
        }
        .flow-1st{
            width:28px;
            border-radius: 8px;
            position: relative;
            display: inline-block;
            color:white;
            border:1px solid #bf0f75;
            background: linear-gradient(to bottom, #940e58, #610c6d);
            text-align: center;
        }
        .flow-2nd{
            width:28px;
            border-radius: 8px;
            position: relative;
            display: inline-block;
            color:white;
            border:1px solid #0aebf5;
            background: linear-gradient(to bottom, #066abc, #09a9b6);
            text-align: center;
        }
        .flow-3td{
            width:28px;
            border-radius: 8px;
            position: relative;
            display: inline-block;
            color:white;
            border:1px solid #0699fe;
            background: linear-gradient(to bottom,#045092, #076cba);
            text-align: center;
        }
        .flow-num{
            width:28px;
            border-radius: 8px;
            position: relative;
            display: inline-block;
            color:#106cb2;
            border:1px solid #132a62;
            background-color: #0b1838;
            text-align: center;
        }
        .scrollbar {
            overflow: auto;
        }
        .scrollbar::-webkit-scrollbar-track-piece {
            background-color: #d0ecfe;
        }

        .scrollbar::-webkit-scrollbar {
            width:6px;
            height:6px;
        }

        .scrollbar::-webkit-scrollbar-thumb {
            background-color:#697d96;
            border-radius: 3px;
            background-clip:padding-box;
            min-height:28px;
        }
        .scrollbar::-webkit-scrollbar-thumb:hover {
            background-color:#697d96;
        }
    </style>
    <script src="./nydsj_files/jquery-3.2.1.min.js"></script>
</head>
<body class="scrollbar" style="zoom: 1;">
<div style="left:0;top:0;width: 100%;height: 100%;color:#80aec6;background: url(&#39;images/trace/bg.png&#39;) round;min-width:1560px;min-height:780px;">
    <!--全屏按钮-->
    <div style="right:30px;top:10px;color:#7890ab" onclick="fullScreen()"><i class="icon iconfont icon-quanping" style="font-size: 20px;"></i></div>
    <!--左边扫描轮播-->
    <div id="saomiao" style="left:50px;top:7.5%;width:500px;height:20px;overflow:hidden;color:#80aec6;font-size:12px;"><div style="top: -315px; height: 1500px; width: 500px; overflow: hidden;"><div class="saomiao-list">0分钟前来自贵阳市的网友通过扫码查看了果园信息</div><div class="saomiao-list">8分钟前来自贵阳市的网友通过扫码查看了果园信息</div><div class="saomiao-list">9分钟前来自贵阳市的网友通过扫码查看了果园信息</div><div class="saomiao-list">9分钟前来自贵阳市的网友通过扫码查看了果园信息</div><div class="saomiao-list">25分钟前来自广州市的网友通过扫码查看了果园信息</div><div class="saomiao-list">27分钟前来自北京市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自太原市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自天津市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自银川市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自新乡市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自新乡市的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自市辖区的网友通过扫码查看了果园信息</div><div class="saomiao-list">1小时前来自山东省的网友通过扫码查看了果园信息</div></div></div>
    <!--右边天气-->
    <div id="weather" style="right:50px;top:7.5%;color:#80aec6;font-size:12px;"><img style="position: relative;display: inline-block;width:32px;" src="./nydsj_files/cloudy.png"><div style="position: relative;display: inline-block;text-align:center;width:100px;">11月01日 周四<br>8℃~20℃</div><img style="position: relative;display: inline-block;width:32px;" src="./nydsj_files/sunny.png"><div style="position: relative;display: inline-block;text-align:center;width:100px;">11月02日 周五<br>9℃~18℃</div><img style="position: relative;display: inline-block;width:32px;" src="./nydsj_files/cloudy.png"><div style="position: relative;display: inline-block;text-align:center;width:100px;">11月03日 周六<br>9℃~18℃</div><img style="position: relative;display: inline-block;width:32px;" src="./nydsj_files/lightrain.png"><div style="position: relative;display: inline-block;text-align:center;width:100px;">11月04日 周日<br>9℃~17℃</div></div>
    <!--左上-->
    <div style="left:40px;top:12.69%;height:28.89%;width:23.12%;overflow: hidden;background: url(&#39;images/trace/border-left1.png&#39;) round;">
        <br>
        <div style="position: relative; width: 100%;text-align: center;">
            累计扫描<dfn class="text-color" data-bind="sum">8756</dfn>（次）
        </div>
        <br>
        <div style="position: relative;padding-left:5%;padding-right: 5%;width: 90%">
            <div class="list-table">地区</div>
            <div class="list-table">本月扫描次数</div>
            <div class="list-table">累计扫描次数</div>
        </div>
        <div style="position: relative;height:60%;width:100%;overflow: hidden">
            <div id="smList" style="top: -19px; left: 0px; padding-left: 5%; padding-right: 5%; width: 90%; height: 500px; overflow: hidden;"><div class="row1"> <div class="list-table">广东</div> <div class="list-table">1091</div> <div class="list-table">1091</div> </div><div class="row0"> <div class="list-table">贵州</div> <div class="list-table">913</div> <div class="list-table">913</div> </div><div class="row1"> <div class="list-table">江苏</div> <div class="list-table">591</div> <div class="list-table">591</div> </div><div class="row0"> <div class="list-table">天津</div> <div class="list-table">458</div> <div class="list-table">458</div> </div><div class="row1"> <div class="list-table">上海</div> <div class="list-table">336</div> <div class="list-table">336</div> </div><div class="row0"> <div class="list-table">浙江</div> <div class="list-table">314</div> <div class="list-table">314</div> </div><div class="row1"> <div class="list-table">山东</div> <div class="list-table">287</div> <div class="list-table">287</div> </div><div class="row0"> <div class="list-table">河北</div> <div class="list-table">240</div> <div class="list-table">240</div> </div><div class="row1"> <div class="list-table">辽宁</div> <div class="list-table">164</div> <div class="list-table">164</div> </div><div class="row0"> <div class="list-table">云南</div> <div class="list-table">163</div> <div class="list-table">163</div> </div><div class="row1"> <div class="list-table">河南</div> <div class="list-table">147</div> <div class="list-table">147</div> </div><div class="row0"> <div class="list-table">湖北</div> <div class="list-table">144</div> <div class="list-table">144</div> </div><div class="row1"> <div class="list-table">福建</div> <div class="list-table">122</div> <div class="list-table">122</div> </div><div class="row0"> <div class="list-table">安徽</div> <div class="list-table">99</div> <div class="list-table">99</div> </div><div class="row1"> <div class="list-table">黑龙</div> <div class="list-table">80</div> <div class="list-table">80</div> </div><div class="row0"> <div class="list-table">山西</div> <div class="list-table">73</div> <div class="list-table">73</div> </div><div class="row1"> <div class="list-table">吉林</div> <div class="list-table">72</div> <div class="list-table">72</div> </div><div class="row0"> <div class="list-table">内蒙</div> <div class="list-table">67</div> <div class="list-table">67</div> </div><div class="row1"> <div class="list-table">陕西</div> <div class="list-table">64</div> <div class="list-table">64</div> </div><div class="row0"> <div class="list-table">广西</div> <div class="list-table">56</div> <div class="list-table">56</div> </div><div class="row1"> <div class="list-table">宁夏</div> <div class="list-table">40</div> <div class="list-table">40</div> </div><div class="row0"> <div class="list-table">四川</div> <div class="list-table">38</div> <div class="list-table">38</div> </div><div class="row1"> <div class="list-table">江西</div> <div class="list-table">29</div> <div class="list-table">29</div> </div><div class="row0"> <div class="list-table">湖南</div> <div class="list-table">19</div> <div class="list-table">19</div> </div><div class="row1"> <div class="list-table">重庆</div> <div class="list-table">17</div> <div class="list-table">17</div> </div><div class="row0"> <div class="list-table">新疆</div> <div class="list-table">13</div> <div class="list-table">13</div> </div><div class="row1"> <div class="list-table">香港</div> <div class="list-table">9</div> <div class="list-table">9</div> </div><div class="row0"> <div class="list-table">甘肃</div> <div class="list-table">7</div> <div class="list-table">7</div> </div><div class="row1"> <div class="list-table">海南</div> <div class="list-table">3</div> <div class="list-table">3</div> </div><div class="row0"> <div class="list-table">青海</div> <div class="list-table">2</div> <div class="list-table">2</div> </div><div class="row1"> <div class="list-table">台湾</div> <div class="list-table">1</div> <div class="list-table">1</div> </div><div class="row0"> <div class="list-table">北京</div> <div class="list-table">3097</div> <div class="list-table">3097</div> </div></div>
        </div>
    </div>
    <!--左中-->
    <div style="left:40px;top:42.3%;height:28.89%;width:23.12%;background: url(&#39;images/trace/border-normal.png&#39;) round;">
        <div id="chart1" style="width: 100%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309270"><div style="position: relative; overflow: hidden; width: 361px; height: 280px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="361" height="280" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 280px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas width="361" height="280" data-zr-dom-id="zr_5" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 280px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas width="361" height="280" data-zr-dom-id="zr_6" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 280px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: &quot;Microsoft YaHei&quot;; line-height: 21px; padding: 5px; left: 189px; top: 72px;">黑龙江:NaN元/斤</div></div>
    </div>
    <!--左下-->
    <div style="left:40px;bottom:2%;height:26%;width:23.12%;background: url(&#39;images/trace/border-normal.png&#39;) round;">
        <div style="width: 50%;height:100%;font-size:14px;overflow: hidden">
            <br>
            &nbsp;&nbsp;&nbsp;&nbsp;客户满意度评价
            <ul style="font-size: 18px;line-height: 26px;margin-top:10px;">
                <li style="color:rgb(10,154,189)">★★★★★<dfn data-bind="00">84%</dfn><dfn data-bind="01">208</dfn></li>
                <li style="color:rgb(10,143,189)">★★★★<my style="color:rgb(10,53,80)">☆</my><dfn data-bind="10">6%</dfn><dfn data-bind="11">17</dfn></li>
                <li style="color:rgb(9,133,191)">★★★<my style="color:rgb(10,53,80)">☆☆</my><dfn data-bind="20">1%</dfn><dfn data-bind="21">4</dfn></li>
                <li style="color:rgb(8,121,192)">★★<my style="color:rgb(10,53,80)">☆☆☆</my><dfn data-bind="30">1%</dfn><dfn data-bind="31">4</dfn></li>
                <li style="color:rgb(7,110,192)">★<my style="color:rgb(10,53,80)">☆☆☆☆</my><dfn data-bind="40">4%</dfn><dfn data-bind="41">12</dfn></li>
                <li style="color:rgb(10,53,80)">☆☆☆☆☆<dfn data-bind="50">0%</dfn><dfn data-bind="51">0</dfn></li>
            </ul>
        </div>
        <div id="chart2" style="left: 46%; width: 50%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309271"><div style="position: relative; overflow: hidden; width: 180px; height: 252px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="180" height="252" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 180px; height: 252px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div></div>
    </div>
    <!--中间地图-->
    <div style="left:calc(45px + 23.12%);right:calc(45px + 23.12%);top:8.6%;height:62%;background: url(&#39;images/trace/border-center.png&#39;) round;">
        <div id="chart3" style="width: 100%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309272"><div style="position: relative; overflow: hidden; width: 749px; height: 601px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="749" height="601" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 749px; height: 601px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas width="749" height="601" data-zr-dom-id="zr_1" style="position: absolute; left: 0px; top: 0px; width: 749px; height: 601px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas><canvas width="749" height="601" data-zr-dom-id="zr_2" style="position: absolute; left: 0px; top: 0px; width: 749px; height: 601px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
    <div style="width: 140px; height: 400px; left: 15px; bottom: 10px; font-size: 12px;"><div class="flow-list"><div class="flow-1st">1</div> 北京:2.9万斤</div><div class="flow-list"><div class="flow-2nd">2</div> 辽宁:2.8万斤</div><div class="flow-list"><div class="flow-3td">3</div> 江苏:2.1万斤</div><div class="flow-list"><div class="flow-num">4</div> 浙江:1.7万斤</div><div class="flow-list"><div class="flow-num">5</div> 广东:1.2万斤</div><div class="flow-list"><div class="flow-num">6</div> 福建:1万斤</div><div class="flow-list"><div class="flow-num">7</div> 山东:0.7万斤</div><div class="flow-list"><div class="flow-num">8</div> 四川:0.7万斤</div><div class="flow-list"><div class="flow-num">9</div> 安徽:0.6万斤</div><div class="flow-list"><div class="flow-num">10</div> 湖北:0.6万斤</div><div class="flow-list"><div class="flow-num">11</div> 河南:0.6万斤</div><div class="flow-list"><div class="flow-num">12</div> 云南:0.5万斤</div><div class="flow-list"><div class="flow-num">13</div> 重庆:0.3万斤</div><div class="flow-list"><div class="flow-num">14</div> 陕西:0.2万斤</div><div class="flow-list"><div class="flow-num">15</div> 江西:0.2万斤</div></div></div>
    <!--底部图表-->
    <div style="left:calc(45px + 23.12%);right:calc(45px + 23.12%);height:26%;bottom:2%;background: url(&#39;images/trace/border-bottom.png&#39;) round;">
        <div id="chart4" style="width: 50%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309273"><div style="position: relative; overflow: hidden; width: 374px; height: 252px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="374" height="252" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 374px; height: 252px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(128, 174, 198); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;; line-height: 18px; padding: 5px; left: 151.267px; top: 61.472px;">09月<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(31,78,180,0.9);"></span>施肥: 2<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(25,212,189,0.9);"></span>用药: 3<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(179,179,94,0.9);"></span>种植: 0<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(83,125,158,0.9);"></span>生长记录: 74</div></div>
        <div id="chart5" style="left: 50%; width: 50%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309274"><div style="position: relative; overflow: hidden; width: 375px; height: 252px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="375" height="252" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 375px; height: 252px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(128, 174, 198); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;; line-height: 18px; padding: 5px; left: 113px; top: 97.5468px;">09月<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(31,78,180,0.9);"></span>采摘数量(千斤): 618<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(179,179,94,0.9);"></span>销售数量(盒): 8,604</div></div>
    </div>
    <!--右边-->
    <div style="right:40px;top:12.69%;height:28.89%;width:23.12%;background: url(&#39;images/trace/border-right1.png&#39;) round;">
        <div id="chart6" style="width: 100%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309275"><div style="position: relative; overflow: hidden; width: 361px; height: 280px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="361" height="280" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 280px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div></div>
    </div>
    <div style="right:40px;top:42.3%;height:28.89%;width:23.12%;background: url(&#39;images/trace/border-normal.png&#39;) round;">
        <div id="chart7" style="width: 100%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309276"><div style="position: relative; overflow: hidden; width: 361px; height: 280px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="361" height="280" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 280px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(128, 174, 198); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;; line-height: 18px; padding: 5px; left: -121.467px; top: 122.287px;">大雾橙色预警-遵义市<br>发布时间：2018-11-01 解除时间：2018-11-02<br>预警内容：预计未来我县部分路段将出现能见度小<br>于200米的大雾，请注意交通安全。</div></div>
    </div>
    <div style="right:40px;bottom:2%;height:26%;width:23.12%;background: url(&#39;images/trace/border-normal.png&#39;) round;">
        <div id="chart8" style="width: 100%; height: 100%; -webkit-tap-highlight-color: transparent; user-select: none; background: transparent;" _echarts_instance_="ec_1541039309277"><div style="position: relative; overflow: hidden; width: 361px; height: 252px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="361" height="252" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 361px; height: 252px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(128, 174, 198); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;; line-height: 18px; padding: 5px; left: 216.25px; top: 11.75px;">微信<br>销售总量：62964盒<br>占比：23.71%<br>周销售量：0盒<br>占比:0%</div></div>
    </div>
<div style="width: 140px; height: 35px; right: 45px; bottom: 35px; font-size: 12px;">总销售量：265479盒<br>周销售量：0盒</div></div>
<script src="./nydsj_files/echarts.js"></script>
<script src="./nydsj_files/china.js"></script>
<script src="./nydsj_files/guizhou.js"></script>
<script src="./nydsj_files/saler.js"></script>
<script src="./nydsj_files/module.js"></script>
<link rel="stylesheet" href="./nydsj_files/iconfont.css">
<script>

    var runPrefixMethod = function(element, method) {
        var usablePrefixMethod;
        ["webkit", "moz", "ms", "o", ""].forEach(function(prefix) {
            if (usablePrefixMethod) return;
            if (prefix === "") {
                // 无前缀，方法首字母小写
                method = method.slice(0, 1).toLowerCase() + method.slice(1);
            }
            var typePrefixMethod = typeof element[prefix + method];

            if (typePrefixMethod + "" !== "undefined") {
                if (typePrefixMethod === "function") {
                    usablePrefixMethod = element[prefix + method]();
                } else {
                    usablePrefixMethod = element[prefix + method];
                }
            }
        });

        return usablePrefixMethod;
    };
    function  fullScreen() {
        if (runPrefixMethod(document, "FullScreen") || runPrefixMethod(document, "IsFullScreen")) {
            runPrefixMethod(document, "CancelFullScreen");
            this.title = this.title.replace("退出", "");
        } else if (runPrefixMethod(document.body, "RequestFullScreen")) {
            this.title = this.title.replace("点击", "点击退出");
        }
    }
    var echart1=echarts.init(document.getElementById("chart1"));
    var echart2=echarts.init(document.getElementById("chart2"));
    var echart3=echarts.init(document.getElementById("chart3"));
    var echart4=echarts.init(document.getElementById("chart4"));
    var echart5=echarts.init(document.getElementById("chart5"));
    var echart6=echarts.init(document.getElementById("chart6"));
    var echart7=echarts.init(document.getElementById("chart7"));
    var echart8=echarts.init(document.getElementById("chart8"));
    (function () {
        var lineWidth = 1;
        $(window).resize(function () {
            echart1.resize();
            echart2.resize();
            echart3.resize();
            echart4.resize();
            echart5.resize();
            echart6.resize();
            echart7.resize();
            echart8.resize();
        });
        //图表
        var accessToken = "";
        var post = {
            grant_type: 'client_credentials', //请求令牌类型：密码认证授权(password)、客户端认证授权(client_credentials)
            client_id: 10, //授权ID
            client_secret: 'noaojvhd56n19pCiOGFdN5v2A7ZFrIJvhnUy8zX8' //授权码
        };
        $.post("http://new.xwnykzs.com/oauth/token", post, function (result) {
            accessToken = result.access_token;
            //当前扫描二维码轮播
            var saomiaoData="";
            var getSaomiaoData=function() {
                //获取20条最新扫描信息
                $.ajax({
                    type: 'POST',
                    url: "http://new.xwnykzs.com/client/analysis/tracing/scanmsgdata",
                    headers: {
                        "Accept": 'application/json',
                        "Authorization": 'Bearer ' + accessToken
                    },
                    dataType: 'json',
                    success: function (data) {
                        //data=["10分钟前来自广州的网友通过扫码查看了果园信息","20分钟前来自上海的网友通过扫码查看了果园信息","30分钟前来自放到的网友通过扫码查看了果园信息","10分钟前来自强制的网友通过扫码查看了果园信息","10分钟前来自广州的网友通过扫码查看了果园信息","20分钟前来自上海的网友通过扫码查看了果园信息","30分钟前来自放到的网友通过扫码查看了果园信息","10分钟前来自强制的网友通过扫码查看了果园信息","10分钟前来自广州的网友通过扫码查看了果园信息","20分钟前来自上海的网友通过扫码查看了果园信息","30分钟前来自放到的网友通过扫码查看了果园信息","10分钟前来自强制的网友通过扫码查看了果园信息","10分钟前来自广州的网友通过扫码查看了果园信息","20分钟前来自上海的网友通过扫码查看了果园信息","30分钟前来自放到的网友通过扫码查看了果园信息","10分钟前来自强制的网友通过扫码查看了果园信息"];
                        saomiaoData=data;
                        var html="<div style='top:0px;height:1500px;width:500px;overflow: hidden'>";
                        for(var i=0;i<saomiaoData.length;i++) {
                            html+="<div class='saomiao-list'>"+saomiaoData[i]+"</div>";
                        }
                        document.getElementById("saomiao").innerHTML=html+"</div>";
                        lunbo();
                    }
                })
            };
            var roll=0,dir=0;
            var lunbo=function () {
                var o = document.getElementById("saomiao").children[0];
                if(!o || parseInt(o.style.top)<=30-o.children.length*30){
                    getSaomiaoData();
                }
                else {
                    o.style.top = parseInt(o.style.top) - 3 + "px";
                    if(parseInt(parseInt(o.style.top))%30==0){
                        setTimeout(function () {
                            lunbo()
                        }, 1500);
                    }
                    else {
                        setTimeout(function () {
                            lunbo()
                        }, 50);
                    }
                }
            };
            lunbo();
            //天气处理
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/getweather",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (data) {
                    var nowData = data.result.today;
                    var dayhtml = '';
                    var WeatherPic;
                    var getDate = function (data) {
                        return data.date.substring(4, 6) + "月" + data.date.substring(6) + "日 " + data.week.replace("星期", "周");
                    };
                    for (var i = 0; i < data.result.future.length && i < 4; i++) {
                        nowData = data.result.future[i];
                        WeatherPic = "images/trace/weather/" + getWeatherPic(nowData.weather_id.fa);
                        dayhtml += '<img style="position: relative;display: inline-block;width:32px;" src="' + WeatherPic + '" />';  //天气图片
                        dayhtml += '<div style="position: relative;display: inline-block;text-align:center;width:100px;">' + getDate(nowData) + "<br>" + nowData.temperature + '</div>';  //温度范围
                    }
                    $("#weather").html(dayhtml);
                }
            });
            //扫描度播放
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/hotdata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (data) {
                    document.getElementsByTagName("dfn")[0].innerText = data.sum;
                    var html = "";
                    for (var i = 0; i < data.info.length; i++) {
                        html += '<div class="row' + i % 2 + '"> ' +
                            '<div class="list-table">' + data.info[i].name + '</div> ' +
                            '<div class="list-table">' + data.info[i].value + '</div> ' +
                            '<div class="list-table">' + data.info[i].value + '</div> ' +
                            '</div>';
                    }
                    $("#smList").html(html);
                }
            });
            //价格监测
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/pricedata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
                    /*价格监控*/
                    var convertData = function (data) {
                        var d = [];
                        for (var i = 0; i < data.length && i < 9; i++) {
                            if (geoCoordMap[data[i].name])
                                d.push({name: data[i].name, value: geoCoordMap[data[i].name].concat(data[i].value)})
                        }
                        return d;
                    };
                    var option = {
                        title: [
                            {
                                text: '猕猴桃价格监控',
                                x: 'center',
                                top:15,
                                textStyle: {
                                    color: '#80aec6',
                                    fontSize: 14,
                                    fontWeight: 'lighter'
                                }
                            }
                        ],
                        tooltip: {
                            trigger: 'item',
                            formatter: function (params) {
                                if (typeof(params.value)[2] == "undefined") {
                                    return params.name + ":" + params.value + '元/斤';
                                } else {
                                    return params.name + ' : ' + params.value[2] + '元/斤';
                                }
                            }
                        },
                        dataRange: {
                            show: true,
                            min: 3,
                            max: 30,
                            x: 15,
                            y: 'bottom',
                            itemWidth: 8,
                            itemHeight: 90,
                            color: ['#052b62', '#069dff'],
                            text: ['高', '低'],           // 文本，默认为数值文本
                            calculable: true,
                            splitNumber: 0,
                            seriesIndex: [0],
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        geo: {
                            show: true,
                            map: 'china',
                            roam: true,
                            zoom:1.2,
                            itemStyle: {
                                normal: {
                                    areaColor: 'transparent',
                                    borderColor: 'transparent'
                                },
                                emphasis: {
                                    areaColor: 'transparent'
                                }
                            }
                        },
                        series: [
                            {
                                name: '价格监控',
                                type: 'map',
                                mapType: 'china',
                                zoom:1.2,
                                itemStyle: {
                                    normal: {
                                        label: {
                                            show: false, textStyle: {
                                                color: '#80aec6',
                                                fontSize: 10
                                            }
                                        },
                                        borderColor: '#d3d3d3',
                                        borderWidth: 0
                                    },
                                    emphasis: {label: {show: true, color: '#FFFFFF'}}
                                },
                                data: dat.map
                            },
                            {
                                name: '气泡',
                                type: 'scatter',
                                coordinateSystem: 'geo',
                                symbol: 'pin',
                                symbolSize: function (val) {
                                    var a = val[2] * 1.5;
                                    return a;
                                },
                                label: {
                                    normal: {
                                        show: true,
                                        textStyle: {
                                            color: '#fff',
                                            fontSize: 9
                                        }
                                    }
                                },
                                itemStyle: {
                                    normal: {
                                        color: '#F62157' //标志颜色
                                    }
                                },
                                zlevel: 6,
                                data: convertData(dat.map)
                            },
                            {
                                name: '底座',
                                type: 'effectScatter',
                                coordinateSystem: 'geo',
                                label: {
                                    normal: {
                                        formatter: '{b}',
                                        position: 'right',
                                        show: true
                                    },
                                    emphasis: {
                                        show: true
                                    }
                                },
                                symbolSize: function (val) {
                                    var a = val[2] * 1.5;
                                    return [val[2], val[2] / 1.5];
                                },
                                showEffectOn: 'render',
                                rippleEffect: {
                                    brushType: 'stroke'
                                },
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(235,245,255,0.6)' //标志颜色
                                    }
                                },
                                emphasis: {label: {show: true, color: '#FFFFFF'}},
                                zlevel: 5,
                                data: convertData(dat.map)
                            }
                        ]
                    };
                    echart1.setOption(option);
                }
            });
            //流向监测
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/flowsdata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
                    var html="";
                    html += "<div class='flow-list'><div class='flow-1st'>1</div> " + dat.yaxdata[dat.gybardata.length-1] + ":" + parseInt(dat.gybardata[dat.gybardata.length-1] / 1000) / 10 + "万斤</div>";
                    html += "<div class='flow-list'><div class='flow-2nd'>2</div> " + dat.yaxdata[dat.gybardata.length-2] + ":" + parseInt(dat.gybardata[dat.gybardata.length-2] / 1000) / 10 + "万斤</div>";
                    html += "<div class='flow-list'><div class='flow-3td'>3</div> " + dat.yaxdata[dat.gybardata.length-3] + ":" + parseInt(dat.gybardata[dat.gybardata.length-3] / 1000) / 10 + "万斤</div>";
                    for(var i=dat.gybardata.length-4;i>=0;i--) {
                        html += "<div class='flow-list'><div class='flow-num'>" + (dat.gybardata.length - i) + "</div> " + dat.yaxdata[i] + ":" + parseInt(dat.gybardata[i] / 1000) / 10 + "万斤</div>";
                    }
                    var o=document.createElement("div");
                    o.style.width="140px";
                    o.style.height="400px";
                    o.style.left="15px";
                    o.style.bottom="10px";
                    o.style.fontSize="12px";
                    o.innerHTML=html;
                    document.getElementById("chart3").parentNode.appendChild(o);
                    var option = {
                        tooltip: {
                            trigger: 'item',
                            textStyle: {color: '#fff'},
                            formatter: function (params, ticket, callback) {
                                if (params.componentSubType == 'effectScatter') {
                                    var res = "<a>" + params.seriesName + "</a><br />" + params.name + "&nbsp;:&nbsp;" + params.data.value[2] + " 斤";
                                    return res;
                                }
                            }
                        },
                        geo: {
                            map: 'world',
                            label: {
                                emphasis: {
                                    show: false,
                                    color: '#a8c849'
                                }
                            },
                            roam: false,
                            itemStyle: {
                                normal: {
                                    areaColor: '#0b4270',
                                    borderColor: '#109bf9'
                                },
                                emphasis: {
                                    areaColor: '#339ee8'
                                }
                            },
                            left: '15%'
                        },
                        series: []
                    };
                    if (dat != null) {
                        var GYData = dat.gydata;
                        var convertmap2Data = function (data) {
                            var res = [];
                            for (var i = 0; i < data.length; i++) {
                                var dataItem = data[i];
                                var fromCoord = geoCoordMap[dataItem[0].name];
                                var toCoord = geoCoordMap[dataItem[1].name];
                                if (fromCoord && toCoord) {
                                    res.push([{
                                        name: dataItem[0].name,
                                        coord: fromCoord
                                    }, {
                                        name: dataItem[1].name,
                                        coord: toCoord
                                    }]);
                                }
                            }
                            return res;
                        };
                        var seriesmap2 = [];
                        [['修文猕猴桃', GYData]].forEach(function (item, i) {
                            seriesmap2.push({
                                    name: item[0],
                                    type: 'lines',
                                    zlevel: 1,
                                    effect: {
                                        show: true,
                                        period: 6,
                                        trailLength: 0.7,
                                        color: 'rgba(255,255,255,0.4)',
                                        symbolSize: 3
                                    },
                                    lineStyle: {
                                        normal: {
                                            color: "#073960",
                                            width: 0,
                                            curveness: 0.2
                                        }
                                    },
                                    data: convertmap2Data(item[1])
                                },
                                {
                                    name: item[0],
                                    type: 'lines',
                                    zlevel: 2,
                                    effect: {
                                        show: true,
                                        period: 6,
                                        trailLength: 0,
                                        symbol: 'triangle',
                                        symbolSize: 10
                                    },
                                    lineStyle: {
                                        normal: {
                                            color: 'rgba(246,33,87,0.6)',
                                            width: 1,
                                            opacity: 0.4,
                                            curveness: 0.2
                                        }
                                    },
                                    data: convertmap2Data(item[1])
                                },
                                {
                                    name: item[0],
                                    type: 'effectScatter',
                                    coordinateSystem: 'geo',
                                    zlevel: 2,
                                    rippleEffect: {
                                        brushType: 'stroke'
                                    },
                                    label: {
                                        normal: {
                                            show: true,
                                            position: 'right',
                                            formatter: '{b}'
                                        }
                                    },
                                    symbolSize: function (val) {
                                        return Math.min(val[2] / 30000, 16);
                                    },
                                    itemStyle: {
                                        normal: {
                                            label: {
                                                show: false, textStyle: {
                                                    color: '#80aec6',
                                                    fontSize: 10
                                                }
                                            },
                                            color:new echarts.graphic.LinearGradient(0, 0, 10, 10, [{
                                                offset: 0,
                                                color: 'rgba(235,245,255,0.6)'
                                            }, {
                                                offset: 1,
                                                color: 'rgba(84,120,255,1)'
                                            }]),
                                            borderColor: '#d3d3d3',
                                            borderWidth: 0
                                        },
                                        emphasis: {label: {show: true, color: '#FFFFFF'}}
                                    },
                                    data: item[1].map(function (dataItem) {
                                        return {
                                            name: dataItem[1].name,
                                            value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                                        };
                                    })
                                });
                        });

                        option.series = seriesmap2;
                        echart3.setOption(option);
                    }
                }
            });
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/commentdata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
                    //dat = {data1: [260, 120, 200], data2: [1234, 864, 456, 784, 23, 245]};//data1:适中、偏甜、偏酸、三个数据(顺序固定);data2:5星4星..0星6个数据(顺序固定)
                    var max = 0;
                    for (var i = 0; i < dat.data1.length; i++) {
                        if (dat.data1[i] > max)
                            max = dat.data1[i];
                    }
                    var sum = 0;
                    for (var i = 0; i < dat.data2.length; i++) {
                        sum += dat.data2[i];
                    }
                    var obj = document.getElementsByTagName("dfn");
                    for (var i = 0; i < obj.length; i++) {
                        switch (obj[i].getAttribute("data-bind")) {
                            case "00":
                                obj[i].innerText = parseInt(dat.data2[0] / sum * 100) + "%";
                                break;
                            case "01":
                                obj[i].innerText = dat.data2[0];
                                break;
                            case "10":
                                obj[i].innerText = parseInt(dat.data2[1] / sum * 100) + "%";
                                break;
                            case "11":
                                obj[i].innerText = dat.data2[1];
                                break;
                            case "20":
                                obj[i].innerText = parseInt(dat.data2[2] / sum * 100) + "%";
                                break;
                            case "21":
                                obj[i].innerText = dat.data2[2];
                                break;
                            case "30":
                                obj[i].innerText = parseInt(dat.data2[3] / sum * 100) + "%";
                                break;
                            case "31":
                                obj[i].innerText = dat.data2[3];
                                break;
                            case "40":
                                obj[i].innerText = parseInt(dat.data2[4] / sum * 100) + "%";
                                break;
                            case "41":
                                obj[i].innerText = dat.data2[4];
                                break;
                            case "50":
                                obj[i].innerText = parseInt(dat.data2[5] / sum * 100) + "%";
                                break;
                            case "51":
                                obj[i].innerText = dat.data2[5];
                                break;
                        }
                    }
                    /*口感占比*/
                    var option = {
                        title: {
                            text: '口感占比',
                            left: 'center',
                            top: 18,
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 14,
                                fontWeight: 'lighter'
                            }
                        },
                        radar: [
                            {
                                indicator: [
                                    {
                                        text: '酸甜适中',
                                        max: max,
                                        value: dat.data1[0],
                                        total: dat.data1[0] + dat.data1[1] + dat.data1[2]
                                    },
                                    {
                                        text: '偏甜',
                                        max: max,
                                        value: dat.data1[1],
                                        total: dat.data1[0] + dat.data1[1] + dat.data1[2]
                                    },
                                    {
                                        text: '偏酸',
                                        max: max,
                                        value: dat.data1[2],
                                        total: dat.data1[0] + dat.data1[1] + dat.data1[2]
                                    }
                                ],
                                center: ['50%', '60%'],
                                radius: '50%',
                                splitNumber: 3,
                                shape: 'circle',
                                symbol: 'none',
                                name: {
                                    formatter: function (value, indicator) {
                                        return value + ":" + parseInt(indicator.value / indicator.total * 100) + "%";
                                    },
                                    textStyle: {
                                        color: '#80aec6'
                                    }
                                },
                                splitArea: {
                                    areaStyle: {
                                        color: ['rgba(114, 172, 209, 0)',
                                            'rgba(114, 172, 209, 0)', 'rgba(114, 172, 209, 0)']
                                    }
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: 'rgba(51, 50, 67, 1)'
                                    }
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: 'rgba(51, 50, 67, 1)'
                                    }
                                }
                            }
                        ],
                        series: [
                            {
                                type: 'radar',
                                symbol: 'none',
                                lineStyle: {
                                    normal: {
                                        width: 0
                                    }
                                },
                                data: [
                                    {
                                        value: dat.data1,
                                        areaStyle: {
                                            normal: {
                                                color: 'rgba(36, 156, 249, 1)'
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    };
                    echart2.setOption(option);
                }
            });
            /*农事活动*/
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/farmingdata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
//                    dat = {
//                        monthList: ['10月', '11月', '12月', '1月', '2月', '3月'],
//                        data: [[14, 24, 12, 8, 6, 2], [10, 4, 2, 18, 2, 4], [24, 14, 8, 9, 4, 7], [11, 12, 15, 14, 5, 9]]
//                    };//monthList:近1年月份；data:施肥，用药，种植，生长记录次数4组数字
                    var option = {
                        title: {
                            text: "一年农事活动数量(次)",
                            top: 18,
                            left: 'center',
                            textStyle: {
                                color: "#80aec6", fontSize: 14,
                                fontWeight: 'lighter'
                            }
                        },
                        legend: {
                            data: ['施肥', '用药', '种植', '生长记录'],
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 12,
                                fontWeight: 'lighter'
                            },
                            bottom: 5
                        },
                        tooltip: {
                            trigger: 'axis',
                            textStyle: {
                                fontSize: 12,
                                color: '#80aec6'
                            }
                        },
                        xAxis: {
                            name: '',
                            data: dat.monthList,
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            }
                        },
                        yAxis: {
                            name: '',
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)',
                                    shadowColor: 'rgba(0, 0, 0, 0)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '施肥',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[0],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(31,78,180,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(31,78,180,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(31,78,180,0)'
                                        }])
                                    }
                                }
                            },
                            {
                                name: '用药',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[1],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(25,212,189,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(25,212,189,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(25,212,189,0)'
                                        }])
                                    }
                                }
                            }, {
                                name: '种植',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[2],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(179,179,94,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(179,179,94,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(179,179,94,0)'
                                        }])
                                    }
                                }
                            },
                            {
                                name: '生长记录',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[3],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(83,125,158,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(83,125,158,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(83,125,158,0)'
                                        }])
                                    }
                                }
                            }
                        ]
                    };
                    echart4.setOption(option);
                }
            })
            /*采摘销售*/
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/picksaledata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
//                    dat = {
//                        monthList: ['10月', '11月', '12月', '1月', '2月', '3月'],
//                        data: [[14, 24, 12, 8, 6, 2], [10, 4, 2, 18, 2, 4]]
//                    };//monthList:近1年月份；data:采摘，销售2组数字
                    for (var i = 0; i < dat.monthList.length; i++) {
                        dat.data[0][i] = parseInt(dat.data[0][i] / 1000);
                    }
                    var option = {
                        title: {
                            text: "一年采摘销售数据",
                            top: 18,
                            left: 'center',
                            textStyle: {
                                color: "#80aec6",
                                fontSize: 14,
                                fontWeight: 'lighter'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            textStyle: {
                                fontSize: 12,
                                color: '#80aec6'
                            }
                        },
                        legend: {
                            data: ['采摘数量(千斤)', '销售数量(盒)'],
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 12,
                                fontWeight: 'lighter'
                            },
                            bottom: 5
                        },
                        xAxis: {
                            name: '',
                            data: dat.monthList,
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            }
                        },
                        yAxis: {
                            name: '',
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)',
                                    shadowColor: 'rgba(0, 0, 0, 0)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '采摘数量(千斤)',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[0],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(31,78,180,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(31,78,180,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(31,78,180,0)'
                                        }])
                                    }
                                }
                            },
                            {
                                name: '销售数量(盒)',
                                smooth: true,
                                symbol: 'none',
                                type: 'line',
                                data: dat.data[1],
                                itemStyle: {
                                    normal: {
                                        color: 'rgba(179,179,94,0.9)'
                                    }
                                },
                                lineStyle: {
                                    normal: {
                                        width: lineWidth
                                    }
                                },
                                areaStyle: {
                                    normal: {
                                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                            offset: 0,
                                            color: 'rgba(179,179,94,0.3)'
                                        }, {
                                            offset: 1,
                                            color: 'rgba(179,179,94,0)'
                                        }])
                                    }
                                }
                            }
                        ]
                    };
                    echart5.setOption(option);
                }
            });

            /*园区信息*/
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/orcharddata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
//                    dat = {
//                        yearList: ['2014年', '2015年', '2016年', '2017年', '2018年'],
//                        data: [[14, 24, 12, 8, 6], [10, 4, 2, 18, 2], [10, 4, 2, 18, 2]]
//                    };//yearList:近5年年份；data:种植面积、株数、产量3组数字
                    for (var i = 0; i < dat.yearList.length; i++) {
                        dat.data[0][i] = dat.data[0][i] / 100;
                        dat.data[1][i] = dat.data[1][i] / 10000;
                        dat.data[2][i] = dat.data[2][i] / 10000;
                    }
                    var option = {
                        title: {
                            text: "园区信息展示",
                            left: 'center',
                            top: 20,
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 14,
                                fontWeight: 'lighter'
                            }
                        },
                        color: [new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#233754'
                        }, {
                            offset: 1,
                            color: '#486c8c'
                        }]), new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#093f57'
                        }, {
                            offset: 1,
                            color: '#0abff3'
                        }]), new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#083a71'
                        }, {
                            offset: 1,
                            color: '#0689ef'
                        }])],
                        legend: {
                            data: ['种植面积(百亩)', '种植株数(万株)', '产量(万斤)'],
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 12
                            },
                            bottom: 5
                        },
                        xAxis: {
                            type: 'category',
                            axisTick: {show: false},
                            data: dat.yearList,
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            }
                        },
                        yAxis: {
                            name: '',
                            nameTextStyle: {
                                color: 'rgba(80,103,124,1)'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(80,103,124,1)'
                                }
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)',
                                    shadowColor: 'rgba(0, 0, 0, 0)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '种植面积(百亩)',
                                type: 'bar',
                                data: dat.data[0],
                                barMaxWidth: 8
                            },
                            {
                                name: '种植株数(万株)',
                                type: 'bar',
                                data: dat.data[1],
                                barMaxWidth: 8
                            },
                            {
                                name: '产量(万斤)',
                                type: 'bar',
                                data: dat.data[2],
                                barMaxWidth: 8
                            }
                        ]
                    };
                    echart6.setOption(option);
                }
            });

            /*销售渠道分析*/
            $.ajax({
                type: 'POST',
                url: "http://new.xwnykzs.com/client/analysis/tracing/saledata",
                headers: {
                    "Accept": 'application/json',
                    "Authorization": 'Bearer ' + accessToken
                },
                dataType: 'json',
                success: function (dat) {
//                    dat = {
//                        type: ['京东', '微信', '天猫', '线下'],
//                        total: ['3245', '2015', '1234', '5678'],
//                        week: [14, 24, 12, 8]
//                    };//total:销售总量；week:周销售量，顺序随意，保证类型和数据对应顺序即可

                    var weekTotal = 0, totTotal = 0;
                    for (var i = 0; i < dat.week.length; i++) {
                        weekTotal += dat.week[i] * 1;
                        totTotal += dat.total[i] * 1;
                    }
                    if (weekTotal == 0)
                        weekTotal = 1;
                    var data = [];
                    for (var i = 0; i < dat.type.length; i++) {
                        data.push({name: dat.type[i], value: dat.total[i]});
                    }
                    var option = {
                        title: {
                            text: "销售渠道分析",
                            left: 'center',
                            top: 18,
                            textStyle: {
                                color: '#80aec6',
                                fontSize: 14,
                                fontWeight: 'lighter'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: function (data) {
                                var idx = data.dataIndex;
                                return dat.type[idx] + "<br/>销售总量：" + dat.total[idx] + "盒<br/>占比：" + parseInt(dat.total[idx] / totTotal * 10000) / 100 +
                                    "%<br/>周销售量：" + dat.week[idx] + "盒<br/>占比:" + parseInt(dat.week[idx] / weekTotal * 10000) / 100 + "%";
                            },
                            textStyle: {
                                fontSize: 12,
                                color: "#80aec6"
                            },
                            show: true
                        },
                        series: [
                            {
                                name: '周销售量',
                                type: 'pie',
                                selectedMode: 'single',
                                radius: ['10%', '25%'],

                                label: {
                                    normal: {
                                        position: 'inner'
                                    }
                                },
                                labelLine: {
                                    normal: {
                                        show: false
                                    }
                                },
                                data: dat.week,
                                color: ['#1f4eb4', '#0773cb', '#77b1cb', '#537d9e']
                            },
                            {
                                name: '总销售量',
                                type: 'pie',
                                radius: ['35%', '50%'],
                                color: ['#1f4eb4', '#0773cb', '#77b1cb', '#537d9e'],
                                label: {
                                    normal: {
                                        formatter: '{b}'
                                    }
                                },
                                data: data
                            }
                        ]
                    };
                    echart8.setOption(option);
                    var o=document.createElement("div");
                    o.style.width="140px";
                    o.style.height="35px";
                    o.style.right="45px";
                    o.style.bottom="35px";
                    o.style.fontSize="12px";
                    o.innerHTML="总销售量："+totTotal+"盒<br>周销售量："+(weekTotal==1?0:weekTotal)+"盒";
                    document.getElementsByTagName("div")[0].appendChild(o);
                    var oldString = "";
                    var bs = {
                        counter: 0,
                        dataIndex: [-1, -1, -1,-1],
                        animate: function () {
                            var o = document.getElementById("smList");
                            if (!o)
                                return;
                            o.style.top = (o.style.top == '' ? 0 : parseInt(o.style.top)) - 1 + "px";
                            if (parseInt(o.style.top) <= -35) {
                                o.style.top = "0";
                                o.appendChild(o.children[0].cloneNode(true));
                                o.removeChild(o.children[0]);
                            }
                            if (bs.counter % 50 == 0 && echart4.getOption() && echart5.getOption() && echart7.getOption()) {
                                echart8.dispatchAction({type: 'downplay', seriesIndex: 0});
                                echart8.dispatchAction({type: 'downplay', seriesIndex: 1});
                                bs.dataIndex[0]++;
                                bs.dataIndex[1]++;
                                bs.dataIndex[2]++;
                                bs.dataIndex[3]++;
                                if (bs.dataIndex[0] == echart4.getOption().series[0].data.length)
                                    bs.dataIndex[0] = 0;
                                if (bs.dataIndex[1] == echart5.getOption().series[0].data.length)
                                    bs.dataIndex[1] = 0;
                                if (bs.dataIndex[2] == echart8.getOption().series[0].data.length)
                                    bs.dataIndex[2] = 0;
                                if (bs.dataIndex[3] == echart7.getOption().series[0].data.length)
                                    bs.dataIndex[3] = 0;
                                echart4.dispatchAction({type: 'showTip', seriesIndex: 0, dataIndex: bs.dataIndex[0]});
                                echart5.dispatchAction({type: 'showTip', seriesIndex: 0, dataIndex: bs.dataIndex[1]});
                                echart8.dispatchAction({type: 'showTip', seriesIndex: 0, dataIndex: bs.dataIndex[2]});
                                echart7.dispatchAction({type: 'showTip', seriesIndex: 0, dataIndex: bs.dataIndex[3]});
                                echart4.dispatchAction({type: 'highlight', seriesIndex: 0, dataIndex: bs.dataIndex[0]});
                                echart5.dispatchAction({type: 'highlight', seriesIndex: 0, dataIndex: bs.dataIndex[1]});
                                echart8.dispatchAction({type: 'highlight', seriesIndex: 0, dataIndex: bs.dataIndex[2]});
                                echart8.dispatchAction({type: 'highlight', seriesIndex: 1, dataIndex: bs.dataIndex[2]});
                            }
                            if (bs.counter % 200 == 0) {
                                bs.counter = 1;
                                $.ajax({
                                    type: 'POST',
                                    url: "http://new.xwnykzs.com/client/analysis/tracing/weatherdata",
                                    headers: {
                                        "Accept": 'application/json',
                                        "Authorization": 'Bearer ' + accessToken
                                    },
                                    dataType: 'json',
                                    success: function (dat) {
                                        if (JSON.stringify(dat) == oldString)return;
                                        oldString = JSON.stringify(dat);
                                        var allNames = "", redata = [];
                                        for (var i = 0; i < dat.length; i++) {
                                            if (allNames.indexOf("," + dat[i].city) == -1) {//防同一城市多个预警影响视觉效果
                                                allNames += "," + dat[i].city;
                                                dat[i].title = dat[i].title.substring(dat[i].title.indexOf("发布") + 2);
                                                dat[i].name = dat[i].city;
                                                dat[i].content = dat[i].content.substring(0, dat[i].content.indexOf("（预警信息来源")).substring(dat[i].content.indexOf("：") + 1);
                                                dat[i].content = dat[i].content.substring(0, 17) + (dat[i].content.length > 17 ? "<br>" + dat[i].content.substring(17, 39) : "") + (dat[i].content.length > 39 ? "<br>" + dat[i].content.substring(39) : "")
                                                var type = 0;
                                                if (dat[i].title.indexOf("红色") != -1)
                                                    type = 4;
                                                else if (dat[i].title.indexOf("橙色") != -1)
                                                    type = 3;
                                                else if (dat[i].title.indexOf("黄色") != -1)
                                                    type = 2;
                                                else if (dat[i].title.indexOf("蓝色") != -1)
                                                    type = 1;
                                                if (guizhouGeo[dat[i].city]) {
                                                    redata.push(dat[i]);
                                                    dat[i].value = guizhouGeo[dat[i].city].concat(type);
                                                }
                                            }
                                        }
                                        /*实时灾害预警*/
                                        var option = {
                                            title: {
                                                text: '贵州实时灾害预警',
                                                left: 'center',
                                                top: 10,
                                                textStyle: {
                                                    color: '#80aec6',
                                                    fontSize: 14,
                                                    fontWeight: 'lighter'
                                                }
                                            },
                                            tooltip: {
                                                trigger: 'item',
                                                formatter: function (data) {
                                                    item = data.data;
                                                    var res = item.title + "-" + item.city + "<br>发布时间：" + item.fdate + " 解除时间：" + item.tdate + "<br>预警内容：" + item.content;
                                                    return res;
                                                },
                                                textStyle: {
                                                    fontSize: 12,
                                                    color: '#80aec6',
                                                    width:220
                                                }
                                            },
                                            dataRange: {
                                                orient: 'horizontal',
                                                show: false,
                                                min: 0,
                                                max: 4,
                                                calculable: true,
                                                color: ['red', 'orange', 'yellow', 'blue', '#052b62'],
                                                textStyle: {
                                                    color: '#fff'
                                                }
                                            },
                                            geo: {
                                                map: '贵州',
                                                roam: false,
                                                label: {
                                                    emphasis: {
                                                        show: true
                                                    }
                                                },
                                                itemStyle: {
                                                    normal: {
                                                        areaColor: '#052b62',
                                                        borderColor: '#111'
                                                    },
                                                    emphasis: {
                                                        areaColor: '#054183'
                                                    }
                                                }
                                            },
                                            series: [
                                                {
                                                    name: '预警级别',
                                                    type: 'effectScatter',
                                                    coordinateSystem: 'geo',
                                                    data: redata,
                                                    symbolSize: function (val) {
                                                        return val[2] * 5;
                                                    },
                                                    showEffectOn: 'render',
                                                    rippleEffect: {
                                                        scale: 4
                                                    },
                                                    label: {
                                                        normal: {
                                                            formatter: '{b}',
                                                            position: 'right',
                                                            show: true
                                                        }
                                                    },
                                                    itemStyle: {
                                                        normal: {
                                                            color: '#fff'
                                                        }
                                                    }
                                                }
                                            ]
                                        };
                                        echart7.setOption(option);
                                    }
                                });
                            }
                            bs.counter++;
                            setTimeout(bs.animate, 50);
                        }
                    };
                    bs.animate();
                }
            })
        });
        /*获取天气图片*/
        function getWeatherPic(weather) {
            var WeatherPic = '';
            switch (weather) {
                case ("00"):
                    WeatherPic = 'sunny.png';
                    break;
                case ("01"):
                    WeatherPic = 'cloudy.png';
                    break;
                case ("02"):
                    WeatherPic = 'overcast.png';
                    break;
                case ("03"):
                    WeatherPic = 'shower.png';
                    break;
                case ("04"):
                case ("05"):
                    WeatherPic = 'thundershower.png';
                    break;
                case ("06"):
                    WeatherPic = 'sleet.png';
                    break;
                case ("07"):
                    WeatherPic = 'lightrain.png';
                    break;
                case ("08"):
                case ("21"):
                    WeatherPic = 'moderaterain.png';
                    break;
                case ("19"):
                    WeatherPic = 'hail.png';
                    break;
                case ("22"):
                case ("09"):
                    WeatherPic = 'heavyrain.png';
                    break;
                case ("10"):
                case ("11"):
                case ("23"):
                case ("12"):
                    WeatherPic = 'storm.png';
                    break;
                case ("13"):
                    WeatherPic = 'snowflurry.png';
                    break;
                case ("14"):
                    WeatherPic = 'lightsnow.png';
                    break;
                case ("15"):
                    WeatherPic = 'moderatesnow.png';
                    break;
                case ("16"):
                    WeatherPic = 'heavysnow.png';
                    break;
                case ("17"):
                    WeatherPic = 'blizzard.png';
                    break;
                case ("18"):
                    WeatherPic = 'foggy.png';
                    break;
                case ("29"):
                    WeatherPic = 'dust.png';
                    break;
                case ("30"):
                    WeatherPic = 'sand.png';
                    break;
                case ("20"):
                    WeatherPic = 'duststorm.png';
                    break;
                case ("31"):
                    WeatherPic = 'duststorm.png';
                    break;
                case ("53"):
                    WeatherPic = 'haze.png';
                    break;

                default:
                    break;
            }
            return WeatherPic;
        }

        /*流向监测*/
        var geoCoordMap = {
            '北京': [116.415109, 39.911589],
            '天津': [117.210098, 39.09658],
            '石家庄': [114.523948, 38.051159],
            '太原': [112.557878, 37.8755],
            '呼和浩特': [111.767432, 40.90107],
            '沈阳': [123.466643, 41.685425],
            '长春': [125.328765, 43.823799],
            '哈尔滨': [126.541447, 45.808877],
            '上海': [121.481114, 31.235188],
            '南京': [118.802897, 32.064574],
            '无锡': [120.315707, 31.502997],
            '苏州': [120.590687, 31.309242],
            '杭州': [120.217025, 30.254329],
            '厦门': [118.087811, 24.494616],
            '合肥': [117.232804, 31.828344],
            '福州': [119.303597, 26.082198],
            '南昌': [115.865405, 28.690056],
            '济南': [117.127477, 36.656561],
            '青岛': [120.391183, 36.077594],
            '郑州': [113.632328, 34.752971],
            '武汉': [114.311071, 30.598115],
            '长沙': [112.945909, 28.234684],
            '广州': [113.271279, 23.136088],
            '深圳': [114.058803, 22.5562],
            '南宁': [108.37304, 22.822601],
            '海口': [110.326216, 20.045092],
            '重庆': [106.558434, 29.56975],
            '成都': [104.083241, 30.656359],
            '修文猕猴桃': [106.637437, 26.652861],
            '昆明': [102.852096, 24.874145],
            '拉萨': [91.120893, 29.650634],
            '西安': [108.94602, 34.346655],
            '兰州': [103.841677, 36.067565],
            '西宁': [101.784162, 36.624147],
            '银川': [106.239159, 38.493825],
            '乌鲁木齐': [87.624274, 43.831503],
            '台北': [121.553042, 25.014682],
            '香港': [114.175557, 22.281423],
            '澳门': [113.550039, 22.193722],
            '俄罗斯': [90, 53],
            '日本': [139.46, 35.42],
            '马来西亚': [111.31, 15.14],
            '河北': [114.523948, 38.051159],
            '山西': [112.557878, 37.8755],
            '内蒙古': [111.767432, 40.90107],
            '辽宁': [123.466643, 41.685425],
            '吉林': [125.328765, 43.823799],
            '黑龙江': [126.541447, 45.808877],
            '江苏': [118.802897, 32.064574],
            '浙江': [120.217025, 30.254329],
            '安徽': [117.232804, 31.828344],
            '福建': [119.303597, 26.082198],
            '江西': [115.865405, 28.690056],
            '山东': [117.127477, 36.656561],
            '河南': [113.632328, 34.752971],
            '湖北': [114.311071, 30.598115],
            '湖南': [112.945909, 28.234684],
            '广东': [113.271279, 23.136088],
            '广西': [108.37304, 22.822601],
            '海南': [110.326216, 20.045092],
            '四川': [104.083241, 30.656359],
            '贵州': [106.637437, 26.652861],
            '云南': [102.852096, 24.874145],
            '西藏': [91.120893, 29.650634],
            '陕西': [108.94602, 34.346655],
            '甘肃': [103.841677, 36.067565],
            '青海': [101.784162, 36.624147],
            '宁夏': [106.239159, 38.493825],
            '新疆': [87.624274, 43.831503],
            '台湾': [121.553042, 25.014682]
        };
        var guizhouGeo={
            '贵阳市': [106.713478,26.578343],
            '六盘水市': [104.846743,26.584643],
            '遵义市': [106.937265,27.706626],
            '安顺市': [105.932188,26.245544],
            '铜仁市': [109.191555,27.718346],
            '黔西南布依族苗族自治州': [104.897971,25.08812],
            '毕节市': [105.28501,27.301693],
            '黔东南苗族侗族自治州': [107.977488,26.583352],
            '黔南布依族苗族自治州': [107.517156,26.258219]
        };
    })();

</script>

</body></html>